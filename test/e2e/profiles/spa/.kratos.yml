selfservice:
  flows:
    settings:
      privileged_session_max_age: 5m
      ui_url: http://localhost:4455/settings
      required_aal: aal1

    logout:
      after:
        default_browser_return_url: http://localhost:4455/login

    registration:
      ui_url: http://localhost:4455/registration
      after:
        password:
          hooks:
            - hook: session
        oidc:
          hooks:
            - hook: session
    login:
      ui_url: http://localhost:4455/login
    error:
      ui_url: http://localhost:4455/error
    verification:
      enabled: true
      lifespan: 5m
      ui_url: http://localhost:4455/verify
    recovery:
      enabled: true
      lifespan: 5m
      ui_url: http://localhost:4455/recovery

  methods:
    oidc:
      enabled: true
      config:
        providers:
          - id: hydra
            label: Ory
            provider: generic
            client_id: kratos-client
            client_secret: kratos-secret
            issuer_url: http://localhost:4444/
            scope:
              - offline
            mapper_url: file://test/e2e/profiles/oidc/hydra.jsonnet
          - id: google
            provider: generic
            client_id: google-client
            client_secret: kratos-secret
            issuer_url: http://localhost:4444/
            scope:
              - offline
            mapper_url: file://test/e2e/profiles/oidc/hydra.jsonnet
          - id: github
            provider: generic
            client_id: github-client
            client_secret: kratos-secret
            issuer_url: http://localhost:4444/
            scope:
              - offline
            mapper_url: file://test/e2e/profiles/oidc/hydra.jsonnet
    totp:
      enabled: true
      config:
        issuer: issuer.ory.sh
    lookup_secret:
      enabled: true
    webauthn:
      enabled: true
      config:
        rp:
          id: localhost
          origin: http://localhost:4455
          display_name: Ory

identity:
  schemas:
    - id: default
      url: file://test/e2e/profiles/spa/identity.traits.schema.json

session:
  whoami:
    required_aal: aal1

courier:
  smtp:
    connection_uri: smtps://test:test@localhost:1025/?skip_ssl_verify=true
    from_address: no-reply@ory.kratos.sh
  templates:
    recovery:
      invalid:
        email:
          body:
            html: base64://e3tkZWZpbmUgInJvb3QifX0KSGksCgp0aGlzIGlzIGEgcmVtb3RlIGludmFsaWQgcmVjb3ZlcnkgdGVtcGxhdGUgd2l0aCBhIGRlZmluZWQgInJvb3QiIHRlbXBsYXRlCgp7ey0gZW5kIC19fQ==
            plaintext: base64://e3tkZWZpbmUgInJvb3QifX0KSGksCgp0aGlzIGlzIGEgcmVtb3RlIGludmFsaWQgcmVjb3ZlcnkgdGVtcGxhdGUgd2l0aCBhIGRlZmluZWQgInJvb3QiIHRlbXBsYXRlCgp7ey0gZW5kIC19fQ==
          subject: base64://QWNjb3VudCBBY2Nlc3MgQXR0ZW1wdGVk
          template_root: root
      valid:
        email:
          body:
            plaintext: base64://SGksCgp0aGlzIGlzIGEgcmVtb3RlIHRlbXBsYXRlCnBsZWFzZSByZWNvdmVyIGFjY2VzcyB0byB5b3VyIGFjY291bnQgYnkgY2xpY2tpbmcgdGhlIGZvbGxvd2luZyBsaW5rOgp7eyAuUmVjb3ZlcnlVUkwgfX0=
            html: base64://SGksCgp0aGlzIGlzIGEgcmVtb3RlIHRlbXBsYXRlCnBsZWFzZSByZWNvdmVyIGFjY2VzcyB0byB5b3VyIGFjY291bnQgYnkgY2xpY2tpbmcgdGhlIGZvbGxvd2luZyBsaW5rOgo8YSBocmVmPSJ7eyAuUmVjb3ZlcnlVUkwgfX0iPnt7IC5SZWNvdmVyeVVSTCB9fTwvYT4=
          subject: base64://UmVjb3ZlciBhY2Nlc3MgdG8geW91ciBhY2NvdW50
